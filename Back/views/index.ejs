<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/styles/styles.css" />
  </head>


  <body class="gradient-background ">

    
    <div class="px-4 py-5  text-center" id="cont1" style="border-radius: 10px;">
      <h1 class="display-5 fw-bold mx-5 img-fluid">Walid Nasr</h1>
            <img
        id="my_img"
        class="m-5"
        src="/photos/myphoto.jpg"
        alt="my_image"
        id="sora"
      />
      <div class="col-lg-6 mx-auto"></div>
    </div>
  

    









 <!-- container of posts -->
      <% if(locals.postsarr) {%>
        <% postsarr.forEach((element, index) => { %>

  <!-- Default View Card -->
  <div class="default-card " id="defcard-<%=index%>">
    <div class="container d-flex flex-column align-items-center">
      <div class="card d-block m-3 d-flex flex-column align-items-center" >
        <img class="card-img-top img-fluid " src="<%= element["imagepath"]  %>" alt="Card image cap" />
        <div class="card-body d-flex flex-column align-items-center justify-content-center">
          <h5 class="card-title"><%= element["titlepost"] %></h5>
          <p class="card-text"><%= element["bodypost"] %></p>
          <div class="d-flex flex-row">
            <form action="/delete-post" method="post" class="m-3">
              <input type="hidden" name="id" value="<%= index %>">
              <button type="submit" class="btn btn-dark">Delete</button>
            </form>
            <button type="button" class="btn btn-dark m-3 edit-btn "  data-index="<%= index %>">Edit</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden Edit Form -->
 <div class="container d-flex flex-column align-items-center d-none " id="hidcard-<%=index%>">
      <div class="card d-block m-3 d-flex flex-column align-items-center" >
        <img class="card-img-top img-fluid" src="<%= element["imagepath"]  %>" alt="Card image cap"  />
        <div class="card-body d-flex flex-column align-items-center justify-content-center">
       <form action="/edit-post" method="POST" class=" my-3" id="formform">
      <input type="hidden" name="id" value="<%= index %>">
      <input name="title" class="form-control mb-2 title-input " placeholder="Post Title" required value="<%= element['titlepost'] %>">
      <textarea name="content" class="form-control mb-2 body-input" placeholder="Post Content" required style="height: 100px;"><%= element['bodypost'] %></textarea>
      <button type="submit" class="btn btn-dark" id="Updatepost">Update Post</button>
    </form>
        </div>
      </div>
    </div>



<% }); %>

      

     <%  } %>







<div class="text-center my-4 container">
  <form action="/add-post" method="POST" class=" mx-auto" enctype="multipart/form-data" >
    <input name="image" type="file"  class="form-control mb-2" required>
    <input name="title" class="form-control mb-2" placeholder="Post Title" required>
    <textarea name="content" class="form-control mb-2" placeholder="Post Content" required style="height: 100px;"></textarea>
    <button type="submit" class="btn btn-dark">Add Post</button>
  </form>
</div>




    <!-- footer-->
     <div class="container"> <footer class="py-3 my-4"> <ul class="nav justify-content-center border-bottom pb-3 mb-3"> <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Home</a></li> <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Features</a></li> <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">Pricing</a></li> <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">FAQs</a></li> <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">About</a></li> </ul> <p class="text-center text-body-secondary">Â© 2025 Company, Inc</p> </footer> </div>
    
    
    <!--scripts-->
     <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

<script>
 $(".edit-btn").click(function(){
       var index=$(this).attr("data-index");
       $(`#defcard-${index}`).addClass("d-none");
       $(`#hidcard-${index}`).removeClass("d-none");
 });
</script>

  </body>
</html>
